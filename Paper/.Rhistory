?sink
install.packages("knitcitations")
library(knitcitation)
library(knitcitations)
?bibtex
library(Zelig)
install.packages("latentnet")
?plot.ci
library(RCurl)
library(foreign)
library(reshape2)
library(ggplot2)
url <- "https://raw.github.com/christophergandrud/GreenBook/master/Data/GB_FRED_cpi.csv?login=christophergandrud&token=0f00c334700dda57eb08fdd1b3c1d17b"
cpi.data <- getURL(url)
cpi.data <- read.csv(textConnection(cpi.data))
summary(cpi.data$senate_dem_rep)
summary(cpi.data$house_dem_rep)
qplot(senate_dem_rep, geom="histogram", data = cpi.data)
qplot(senate_dem_rep, geom="boxplot", data = cpi.data)
qplot(senate_dem_rep, geom="density", data = cpi.data)
qplot(house_dem_rep, geom="histogram", data = cpi.data)
library(MatchIt)
library(Zelig)
library(stats)
# Subset for complete (nonmissing) variables
vars <- c("ElectionPeriod", "pres_party", "error.prop.deflator.q2", "time_to_election", "recession", "senate_dem_rep", "house_dem_rep", "DebtGDP", "ExpenditureGDP", "PotentialGDP")
cpi.complete <- cpi.data[complete.cases(cpi.data[vars]),]
cpi.complete <- cpi.complete[vars]
#### Matching Model ####
cpi.matched.party <- matchit(pres_party ~ recession + time_to_election + senate_dem_rep + house_dem_rep + ExpenditureGDP + PotentialGDP, data = cpi.complete, method = "genetic")
# Diagnostics for Covariate Balance
# summary(cpi.matched.party)
# plot(cpi.matched.party)
# summary(cpi.matched.election)
# plot(cpi.matched.election)
# Turn matched data into data.frame for analysis
cpi.Mdf.party <- match.data(cpi.matched.party)
#### Presidential Party Models ####
#### Non-matched (NP) ####
# Least Squares
NPL1 <- zelig(error.prop.deflator.q2 ~ pres_party + recession + time_to_election + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.data)
# Normal Bayes
NPB1 <- zelig(error.prop.deflator.q2 ~ pres_party + recession + time_to_election + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "normal.bayes", data = cpi.data)
#### Matched (MP) ####
# Least Squares
MPL1 <- zelig(error.prop.deflator.q2 ~ pres_party + recession + time_to_election + senate_dem_rep + house_dem_rep + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.Mdf.party)
# Normal Bayes
MPB1 <- zelig(error.prop.deflator.q2 ~ pres_party + recession + time_to_election + senate_dem_rep + house_dem_rep + ExpenditureGDP + PotentialGDP, model = "normal.bayes", data = cpi.Mdf.party)
################################ Plots ############################################
#### Figures for ls Results Catapilar Plot ####
# .cat for catapilar graph
# .sum for summary
### LS
# Extract and melt quantiles for marginal posterior distributions (not matched data set)
NPL1.cat <- confint(NPL1)
NPL1.cat.sum <- as.data.frame(NPL1.cat)
NPL1.cat.sum$var <- rownames(NPL1.cat.sum)
NPL1.lower.molten <- melt(NPL1.cat.sum, id = c("var"), measure.vars = c("2.5 %"), value.name = "lower")
NPL1.lower.molten <- NPL1.lower.molten[, -2]
NPL1.upper.molten <- melt(NPL1.cat.sum, id = c("var"), measure.vars = c("97.5 %"), value.name = "upper")
NPL1.upper.molten <- NPL1.upper.molten[, -2]
NPL1.molten <- merge(NPL1.lower.molten, NPL1.upper.molten)
NPL1.molten$match <- "Not Matched"
# Extract and melt quantiles for marginal posterior distributions (matched data set)
MPL1.cat <- confint(MPL1)
MPL1.cat.sum <- as.data.frame(MPL1.cat)
MPL1.cat.sum$var <- rownames(MPL1.cat.sum)
MPL1.lower.molten <- melt(MPL1.cat.sum, id = c("var"), measure.vars = c("2.5 %"), value.name = "lower")
MPL1.lower.molten <- MPL1.lower.molten[, -2]
MPL1.upper.molten <- melt(MPL1.cat.sum, id = c("var"), measure.vars = c("97.5 %"), value.name = "upper")
MPL1.upper.molten <- MPL1.upper.molten[, -2]
MPL1.molten <- merge(MPL1.lower.molten, MPL1.upper.molten)
MPL1.molten$match <- "Matched"
estimates.ls <- rbind(NPL1.molten, MPL1.molten)
estimates.ls$method <- "OLS"
#### Figures for normal.bayes Results Catapilar Plot ####
# .cat for catapilar graph
# .sum for summary
### Normal Bayes Models
# Extract and melt quantiles for marginal posterior distributions (not matched data set)
NPB1.cat <- summary(NPB1)
NPB1.cat.sum <- as.data.frame(NPB1.cat$summary)
NPB1.cat.sum$var <- rownames(NPB1.cat.sum)
NPB1.lower.molten <- melt(NPB1.cat.sum, id = c("var"), measure.vars = c("2.5%"), value.name = "lower")
NPB1.lower.molten <- NPB1.lower.molten[, -2]
NPB1.upper.molten <- melt(NPB1.cat.sum, id = c("var"), measure.vars = c("97.5%"), value.name = "upper")
NPB1.upper.molten <- NPB1.upper.molten[, -2]
NPB1.molten <- merge(NPB1.lower.molten, NPB1.upper.molten)
NPB1.molten$match <- "Not Matched"
# Extract and melt quantiles for marginal posterior distributions (matched data set)
MPB1.cat <- summary(MPB1)
MPB1.cat.sum <- as.data.frame(MPB1.cat$summary)
MPB1.cat.sum$var <- rownames(MPB1.cat.sum)
MPB1.lower.molten <- melt(MPB1.cat.sum, id = c("var"), measure.vars = c("2.5%"), value.name = "lower")
MPB1.lower.molten <- MPB1.lower.molten[, -2]
MPB1.upper.molten <- melt(MPB1.cat.sum, id = c("var"), measure.vars = c("97.5%"), value.name = "upper")
MPB1.upper.molten <- MPB1.upper.molten[, -2]
MPB1.molten <- merge(MPB1.lower.molten, MPB1.upper.molten)
MPB1.molten$match <- "Matched"
estimates.b <- rbind(NPB1.molten, MPB1.molten)
estimates.b$method <- "Normal Bayes"
estimates <- rbind(estimates.ls, estimates.b)
# Remove Intercept
estimates <- subset(estimates, var != c("(Intercept)"))
estimates <- subset(estimates, var != c("sigma2"))
cpi.data$pres_party_name <- factor(cpi.data$pres_party, label = c("Rep", "Dem"))
cpi.data$error.prop.deflator.q2 <-  (cpi.data$GB_CPI_QTR2 - cpi.data$deflator)/cpi.data$deflator
cpi.data <- subset(cpi.data, president != "Johnson")
cpi.data$president <- as.factor(cpi.data$presTerm)
source("/git_repositories/GreenBook/Analysis/BasicAnalysisCoefPlots.R")
################
# President*Congress Interaction Graphs
# Christopher Gandrud
# Updated 7 July 2012
################
#### Models ####
######### Senate Interaction with President ##########
MPB2 <- zelig(error.prop.deflator.q2 ~ pres_party*senate_dem_rep + recession + time_to_election + house_dem_rep + ExpenditureGDP + PotentialGDP, model = "normal.bayes", data = cpi.Mdf.party)
# summary(MPB2)
#### Simulations ####
senate_dem_rep.r <- seq(0.8, 2.125, by = .01)
# Set Fitted Values
M2.partySetDem <- setx(MPB2, pres_party = 1, senate_dem_rep = senate_dem_rep.r)
M2.partySetRep <- setx(MPB2, pres_party = 0,senate_dem_rep = senate_dem_rep.r )
# Simulate quantities of interest
M2.partySim <- sim(MPB2, x = M2.partySetRep, x1 = M2.partySetDem)
######### House Interaction with President ##########
MPB3 <- zelig(error.prop.deflator.q2 ~ pres_party*house_dem_rep + recession + time_to_election + senate_dem_rep + ExpenditureGDP + PotentialGDP, model = "normal.bayes", data = cpi.Mdf.party)
# MPB4 <- zelig(error.prop.deflator.q2 ~ pres_party*house_dem_rep*senate_dem_rep + recession + time_to_election + ExpenditureGDP + PotentialGDP, model = "normal.bayes", data = cpi.Mdf.party)
# summary(MPB3)
#### Simulations ####
house_dem_rep.r <- seq(0.8, 2.125, by = .01)
# Set Fitted Values
M3.partySetDem <- setx(MPB3, pres_party = 1, house_dem_rep = house_dem_rep.r)
M3.partySetRep <- setx(MPB3, pres_party = 0,house_dem_rep = house_dem_rep.r )
# Simulate quantities of interest
M3.partySim <- sim(MPB3, x = M3.partySetRep, x1 = M3.partySetDem)
############################################
#### Zelig Plots ####
par(mfrow = c(1, 2))
house.inter <- plot.ci(M3.partySim, main = "House", xlab = "Dem to Rep Ratio", ylab = "Expected Inflation Forecast Error", xlim = c(0.87, 1.599), ylim = c(-0.8, 0.6))
senate.inter <- plot.ci(M2.partySim, main = "Senate", xlab = "Dem to Rep Ratio", ylab = "", xlim = c(0.8, 1.381), ylim = c(-0.8, 0.6))
summary(cpi.data$senate_dem_rep, cpi.data$house_dem_rep)
summary(cpi.data$ElectionPeriod)
cpi.matched.party <- matchit(ElectionPeriod ~ recession + time_to_election + senate_dem_rep + house_dem_rep + ExpenditureGDP + PotentialGDP, data = cpi.complete, method = "genetic")
cpi.matched.election <- matchit(ElectionPeriod ~ recession + time_to_election + senate_dem_rep + house_dem_rep + ExpenditureGDP + PotentialGDP, data = cpi.complete, method = "genetic")
summary(cpi.matched.election)
plot(cpi.matched.election)
cpi.matched.election <- matchit(ElectionPeriod ~ recession + senate_dem_rep + house_dem_rep + ExpenditureGDP + PotentialGDP, data = cpi.complete, method = "genetic")
plot(cpi.matched.election)
cpi.Mdf.election <- match.data(cpi.matched.election)
NPL1 <- zelig(error.prop.deflator.q2 ~ pres_party + recession + ElectionPeriod + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.data)
summary(NPL1)
MPL1 <- zelig(error.prop.deflator.q2 ~ pres_party + recession + ElectionPeriod + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.Mdf.election)
summary(NPL1)
summary(MPL1)
str(MPL1)
class(MPL1)
MB1 <- zelig(error.prop.deflator.q2 ~ pres_party + recession + ElectionPeriod + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "normal.bayes", data = cpi.Mdf.election)
MB1 <- zelig(error.prop.deflator.q2 ~ pres_party +  ElectionPeriod + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "normal.bayes", data = cpi.Mdf.election)
summary(MB1)
class(MB1)
NPL1 <- zelig(error.prop.deflator.q2 ~ pres_party*ElectionPeriod + recession + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.data)
summary(NPI1)
NPI1 <- zelig(error.prop.deflator.q2 ~ pres_party*ElectionPeriod + recession + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.data)
summary(NPI1)
NPI1 <- zelig(error.prop.deflator.q2 ~ pres_party*time_to_election + recession + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.data)
NPI2 <- zelig(error.prop.deflator.q2 ~ pres_party*time_to_election + recession + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.data)
summary(NPI2)
NBI2 <- zelig(error.prop.deflator.q2 ~ pres_party*time_to_election + recession + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "normal.bayes", data = cpi.data)
summary(NBI2)
MPI1 <- zelig(error.prop.deflator.q2 ~ pres_party*ElectionPeriod + recession + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.data)
summary(MPI1)
MPI1 <- zelig(error.prop.deflator.q2 ~ pres_party*ElectionPeriod + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.Mdf.election)
summary(MPI1)
MPI2 <- zelig(error.prop.deflator.q2 ~ pres_party*time_to_election + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "ls", data = cpi.Mdf.election)
summary(MPI2)
MBI2 <- zelig(error.prop.deflator.q2 ~ pres_party*time_to_election + senate_dem_rep + house_dem_rep + DebtGDP + ExpenditureGDP + PotentialGDP, model = "normal.bayes", data = cpi.Mdf.election)
summary(MBI2)
summary(cpi.data)
summary(cars)
?summary
cat <- "cat"
summary(cat)
library(xtable)
xtable(MPI2)
?xtable
xtable(MPI1, MPI2)
library(apsrtable)
?apsrtable
library(leaps)
install.packages("leaps")
library(leaps)
?leaps
x <- c("pres_party" +  "ElectionPeriod" + "senate_dem_rep" + "house_dem_rep" + "DebtGDP" + "ExpenditureGDP" + "PotentialGDP")
x <- c("pres_party",  "ElectionPeriod", "senate_dem_rep", "house_dem_rep", "DebtGDP", "ExpenditureGDP", "PotentialGDP")
x
library(coefplot)
coefplot(NPL1)
?coefplot
class(MB1)
library(texreg)
install.packages("texreg")
library(texreg)
?texreg
texreg(l = list(NPL1, NPI2))
?apsrtable
